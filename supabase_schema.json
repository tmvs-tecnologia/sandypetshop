-- WARNING: This schema is for context only and is not meant to be run.
-- Table order and constraints may not be valid for execution.

CREATE TABLE public.appointments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  appointment_time timestamp with time zone NOT NULL,
  pet_name text NOT NULL,
  owner_name text NOT NULL,
  whatsapp text NOT NULL,
  service text NOT NULL,
  weight text NOT NULL,
  addons ARRAY,
  price numeric NOT NULL,
  status text NOT NULL DEFAULT 'pending'::text,
  pet_breed text,
  owner_address text,
  monthly_client_id uuid,
  condominium text,
  extra_services jsonb,
  CONSTRAINT appointments_pkey PRIMARY KEY (id),
  CONSTRAINT appointments_monthly_client_id_fkey FOREIGN KEY (monthly_client_id) REFERENCES public.monthly_clients(id)
);
CREATE TABLE public.clients (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text NOT NULL,
  phone text,
  CONSTRAINT clients_pkey PRIMARY KEY (id)
);
CREATE TABLE public.controle_bloqueio_chat (
  id integer NOT NULL DEFAULT nextval('controle_bloqueio_chat_id_seq'::regclass),
  telefone character varying UNIQUE,
  bloqueado_em timestamp without time zone,
  expira_em timestamp without time zone,
  CONSTRAINT controle_bloqueio_chat_pkey PRIMARY KEY (id)
);
CREATE TABLE public.daycare_enrollments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  pet_name text NOT NULL,
  pet_breed text,
  is_neutered boolean,
  pet_sex text,
  pet_age text,
  has_sibling_discount boolean,
  tutor_name text NOT NULL,
  tutor_rg text,
  address text NOT NULL,
  contact_phone text NOT NULL,
  emergency_contact_name text,
  emergency_contact_phone text,
  vet_phone text,
  gets_along_with_others boolean,
  last_vaccine text,
  last_deworming text,
  last_flea_remedy text,
  has_allergies boolean,
  allergies_description text,
  needs_special_care boolean,
  special_care_description text,
  delivered_items jsonb,
  contracted_plan text,
  total_price numeric,
  payment_date date,
  status text NOT NULL DEFAULT 'Pendente'::text,
  extra_services jsonb,
  CONSTRAINT daycare_enrollments_pkey PRIMARY KEY (id)
);
CREATE TABLE public.feriados (
  id integer NOT NULL DEFAULT nextval('feriados_id_seq'::regclass),
  data date NOT NULL,
  nome text NOT NULL,
  CONSTRAINT feriados_pkey PRIMARY KEY (id)
);
CREATE TABLE public.hotel_registrations (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone DEFAULT now(),
  updated_at timestamp with time zone DEFAULT now(),
  pet_name text NOT NULL,
  pet_sex text CHECK (pet_sex = ANY (ARRAY['Macho'::text, 'Fêmea'::text])),
  pet_breed text,
  is_neutered boolean,
  pet_age text,
  tutor_name text NOT NULL,
  tutor_rg text,
  tutor_address text,
  tutor_phone text NOT NULL,
  tutor_email text,
  tutor_social_media text,
  vet_phone text,
  emergency_contact_name text,
  emergency_contact_phone text,
  emergency_contact_relation text,
  has_rg_document boolean DEFAULT false,
  has_residence_proof boolean DEFAULT false,
  has_vaccination_card boolean DEFAULT false,
  has_vet_certificate boolean DEFAULT false,
  has_flea_tick_remedy boolean DEFAULT false,
  flea_tick_remedy_date date,
  photo_authorization boolean DEFAULT false,
  retrieve_at_checkout boolean DEFAULT false,
  preexisting_disease text,
  allergies text,
  behavior text,
  fears_traumas text,
  wounds_marks text,
  food_brand text,
  food_quantity text,
  feeding_frequency text,
  accepts_treats text,
  special_food_care text,
  check_in_date date,
  check_in_time time without time zone,
  check_out_date date,
  check_out_time time without time zone,
  service_bath boolean DEFAULT false,
  service_transport boolean DEFAULT false,
  service_daily_rate boolean DEFAULT false,
  service_extra_hour boolean DEFAULT false,
  service_vet boolean DEFAULT false,
  service_training boolean DEFAULT false,
  total_services_price numeric,
  additional_info text,
  professional_name text,
  registration_date date,
  tutor_check_in_signature text,
  tutor_check_out_signature text,
  declaration_accepted boolean DEFAULT false,
  status text DEFAULT 'Ativo'::text CHECK (status = ANY (ARRAY['Ativo'::text, 'Concluído'::text, 'Cancelado'::text])),
  checked_in_at timestamp without time zone,
  checked_out_at timestamp without time zone,
  check_in_status character varying DEFAULT 'pending'::character varying CHECK (check_in_status::text = ANY (ARRAY['pending'::character varying, 'checked_in'::character varying, 'checked_out'::character varying]::text[])),
  extra_services jsonb,
  CONSTRAINT hotel_registrations_pkey PRIMARY KEY (id)
);
CREATE TABLE public.monthly_clients (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  pet_name text NOT NULL,
  pet_breed text,
  owner_name text NOT NULL,
  owner_address text,
  whatsapp text NOT NULL,
  service text NOT NULL,
  weight text NOT NULL,
  price numeric NOT NULL,
  recurrence_type text NOT NULL,
  recurrence_day integer NOT NULL,
  recurrence_time integer NOT NULL,
  is_active boolean NOT NULL DEFAULT true,
  payment_status text NOT NULL DEFAULT 'Pendente'::text,
  payment_due_date date,
  condominium text,
  extra_services jsonb,
  CONSTRAINT monthly_clients_pkey PRIMARY KEY (id)
);
CREATE TABLE public.notifications (
  id integer NOT NULL DEFAULT nextval('notifications_id_seq'::regclass),
  type character varying NOT NULL,
  data jsonb NOT NULL,
  read boolean DEFAULT false,
  created_at timestamp without time zone DEFAULT now(),
  CONSTRAINT notifications_pkey PRIMARY KEY (id)
);
CREATE TABLE public.pet_movel_appointments (
  id uuid NOT NULL DEFAULT gen_random_uuid(),
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  appointment_time timestamp with time zone NOT NULL,
  pet_name text NOT NULL,
  pet_breed text,
  owner_name text NOT NULL,
  owner_address text,
  condominium text,
  whatsapp text NOT NULL,
  service text NOT NULL,
  weight text NOT NULL,
  addons ARRAY,
  price numeric,
  status text DEFAULT 'AGENDADO'::text,
  monthly_client_id uuid,
  extra_services jsonb,
  CONSTRAINT pet_movel_appointments_pkey PRIMARY KEY (id),
  CONSTRAINT pet_movel_appointments_monthly_client_id_fkey FOREIGN KEY (monthly_client_id) REFERENCES public.monthly_clients(id)
);
CREATE TABLE public.pets (
  id bigint GENERATED ALWAYS AS IDENTITY NOT NULL,
  created_at timestamp with time zone NOT NULL DEFAULT now(),
  name text NOT NULL,
  breed text NOT NULL,
  service text NOT NULL,
  before_image_url text NOT NULL,
  after_image_url text NOT NULL,
  CONSTRAINT pets_pkey PRIMARY KEY (id)
);